{"version":3,"sources":["collector-youtube.js"],"names":["console","clear","scrollingElement","document","body","current","scrollHeight","last","autoScrollToBottom","getItem","log","sessionStorage","setItem","setTimeout","clearInterval","removeItem","autoScrollToTop","top","documentElement","scrollTop","scrollTo","window","requestAnimationFrame","getPageDetails","collection","content","querySelectorAll","source","index","runtimeContainer","titleText","thumbnail","data","itemContainer","item","videoContainer","undefined","videoHref","thumbnailContainer","firstElementChild","children","getAttribute","split","titleContainer","hasAttribute","id","video","firstChild","concat","videoURL","thumbnailURL","resetCollectionId","textContent","forEach","runtimeText","key","push","error","_typeof","array","stringify","save","executeScrapping","removeCollector","collector","querySelector","remove","simulatedClick","MouseEvent","hyperlink","view","dispatchEvent","filename","location","href","blob","active","Blob","type","URL","createObjectURL","dataset","downloadurl","join","bubbles","cancelable"],"mappings":"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","file":"collector-youtube.min.js","sourcesContent":["// Clear console before logging new data\r\nconsole.clear();\r\n\r\n// Auto Scroll to Bottom of Page\r\nfunction autoScrollToBottom() {\r\n  let scrollingElement = document.scrollingElement || document.body;\r\n  let current = scrollingElement.scrollHeight;\r\n  let last = sessionStorage.getItem(\"last\");\r\n\r\n  if (current > 0 && current != last) {\r\n    console.log(\"Auto-scroll On\");\r\n    scrollingElement.scrollTop = scrollingElement.scrollHeight;\r\n    sessionStorage.setItem(\"last\", scrollingElement.scrollHeight);\r\n\r\n    setTimeout(() => {\r\n      autoScrollToBottom();\r\n    }, 1000);\r\n  }\r\n\r\n  if (current > 0 && current == last) {\r\n    clearInterval(autoScrollToBottom);\r\n    sessionStorage.removeItem(\"last\");\r\n    console.log(\"Auto-scroll Off\");\r\n\r\n    // Auto Scroll to Top of Page\r\n    autoScrollToTop();\r\n  }\r\n}\r\n\r\nfunction autoScrollToTop() {\r\n  let top = document.documentElement.scrollTop || document.body.scrollTop;\r\n\r\n  if (top > 0) {\r\n    window.requestAnimationFrame(autoScrollToTop);\r\n    window.scrollTo(0, top - top / 120);\r\n  } else {\r\n    setTimeout(() => {\r\n      // Calling Scrapping Function\r\n      getPageDetails();\r\n    }, 3000);\r\n  }\r\n}\r\n\r\n// Youtube.com Scraping\r\nfunction getPageDetails() {\r\n  const content = document.querySelectorAll(\"#content\");\r\n  const collection = [];\r\n\r\n  content.forEach((item, index) => {\r\n    console.log(\"Scrapping On\");\r\n\r\n    if (item.classList.contains(\"ytd-rich-item-renderer\")) {\r\n      let source = window.location.href;\r\n      let itemContainer = item.firstChild.firstElementChild;\r\n\r\n      let videoContainer = itemContainer.firstChild.firstElementChild;\r\n\r\n      if (videoContainer !== undefined) {\r\n        let videoHref = videoContainer.getAttribute(\"href\");\r\n        let videoSplit = videoHref.split(\"=\");\r\n        let videoURL = videoSplit[1];\r\n\r\n        let thumbnailContainer = videoContainer.children[0].firstChild;\r\n        let thumbnailURL;\r\n        if (thumbnailContainer.hasAttribute(\"src\")) {\r\n          thumbnailURL = thumbnailContainer.getAttribute(\"src\");\r\n        }\r\n\r\n        let runtimeContainer =\r\n          videoContainer.children[1].firstChild.children[1];\r\n        let runtimeText = runtimeContainer.textContent.replace(\r\n          /^\\s+|\\n+$/gm,\r\n          \"\"\r\n        );\r\n\r\n        let titleContainer =\r\n          itemContainer.children[3].children[1].firstChild.children[1];\r\n        let titleText = titleContainer.textContent;\r\n\r\n        let data = {\r\n          id: index,\r\n          source: source,\r\n          title: titleText,\r\n          runtime: runtimeText,\r\n          video: `https://youtube.com/embed/${videoURL}`,\r\n          thumbnail: thumbnailURL,\r\n        };\r\n\r\n        collection.push(data);\r\n      }\r\n    }\r\n  });\r\n\r\n  console.log(\"Scrapping Off\");\r\n  resetCollectionId(collection, \"id\");\r\n  // console.log(\"Collection =>\", collection);\r\n}\r\n\r\n// Modified Reset Array id Based from https://stackoverflow.com/questions/12482961/change-values-in-array-when-doing-foreach\r\nfunction resetCollectionId(array, key) {\r\n  array.forEach((item, index) => {\r\n    item[key] = index;\r\n  });\r\n\r\n  console.save(array);\r\n  // console.log(\"Collection Reset =>\", array);\r\n}\r\n\r\n// Based from https://github.com/edubey/browser-console-crawl/blob/master/single-story.js\r\nconsole.save = function (data, filename) {\r\n  if (!data) {\r\n    console.error(\"Console.save: No data\");\r\n    return;\r\n  } else {\r\n    console.log(\"Collection Downloaded\");\r\n  }\r\n\r\n  if (!filename) filename = `${window.location.href}_Collection.json`;\r\n\r\n  if (typeof data === \"object\") {\r\n    data = JSON.stringify(data, undefined, 4);\r\n  }\r\n\r\n  let blob = new Blob([data], {\r\n      type: \"text/json\",\r\n    }),\r\n    hyperlink = document.createElement(\"a\");\r\n\r\n  hyperlink.download = filename;\r\n  hyperlink.href = window.URL.createObjectURL(blob);\r\n  hyperlink.dataset.downloadurl = [\r\n    \"text/json\",\r\n    hyperlink.download,\r\n    hyperlink.href,\r\n  ].join(\":\");\r\n\r\n  let simulatedClick = new MouseEvent(\"click\", {\r\n    view: window,\r\n    bubbles: true,\r\n    cancelable: true,\r\n  });\r\n\r\n  hyperlink.dispatchEvent(simulatedClick);\r\n\r\n  setTimeout(() => {\r\n    removeCollector();\r\n  }, 5000);\r\n};\r\n\r\nfunction executeScrapping() {\r\n  console.clear();\r\n  let active = \"Ninja Mode\";\r\n  autoScrollToBottom();\r\n  return active;\r\n}\r\n\r\nfunction removeCollector() {\r\n  let collector = document.querySelector(\"#fb-collect-sc\");\r\n\r\n  if (collector) {\r\n    collector.remove();\r\n    console.clear();\r\n  }\r\n}\r\n\r\nexecuteScrapping();\r\n"]}